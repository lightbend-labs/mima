language: scala
jdk: openjdk8
scala: 2.12.10

script:
  - export JAVA_TOOL_OPTIONS="-XX:+TraceClassLoading"
  - ls -la ~/.sbt/boot/scala-2.12.7/lib/
  - jar tf ~/.sbt/boot/scala-2.12.7/lib/scala-reflect.jar
  - sbt -v -batch 'set sbtplugin/scriptedSbt := "1.2.8"' 'set sbtplugin/scriptedBufferLog := false' 'scripted sbt-mima-plugin/minimal'

cache:
  directories:
  - $HOME/.cache/coursier
  - $HOME/.ivy2/cache
  - $HOME/.sbt

before_cache:
  - find $HOME/.ivy2 -name "ivydata-*.properties" -delete
  - find $HOME/.sbt  -name "*.lock"               -delete

before_install:
  - echo "JVM_OPTS=$JVM_OPTS"; cat /etc/sbt/jvmopts
  - echo "SBT_OPTS=$SBT_OPTS"; cat /etc/sbt/sbtopts
  - export JAVA_TOOL_OPTIONS="-XX:+TraceClassLoading"